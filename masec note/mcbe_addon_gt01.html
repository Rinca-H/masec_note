<!DOCTYPE html>
<html lang="ja">
<head>
  <meta property="og:site_name" content="Masec's Note" />
  <meta property="og:title" content="【Minecraft BE(統合版)】GameTest解説#1" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://rinca-h.github.io/masec_note/masec%20note/img/masec_note_thumb.png" />
  <meta property="og:description" content="簡単にGameTestの解説をします！" />
  <meta property="og:locale" content="ja_JP" />
  <meta name="twitter:card" content="summary" />
  <meta name="keyword" content="minecraft, マイクラ, マインクラフト, アドオン, GameTest, 作り方">
  <meta name="description" content="簡単にGameTestの解説をします！">
  <title>【Minecraft BE(統合版)】GameTest解説#1 - Masec's Note</title>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" href="highlight-js/masec-light.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <!-- <pre><code class="json">//コード  #f4f3ec </code></pre> -->
  <link rel="stylesheet" type="text/css" href="basic.css">
  <link rel="stylesheet" type="text/css" href="masec_note.css">
  <link rel="stylesheet" type="text/css" href="masec_note_mokuzi.css">
  <!--<style type="text/css"></style>-->
</head>
<body>
  <div style="padding: 0.5em;"><img id="logo" src="img/masec_note_black.png"></div>
  <div style="margin: 8px;"><span class="desc">uploaded:2021/12/10</span></div>
  <div id="whole">
    <div id="main">
      <h1 id="top">MinecraftBE - GameTest解説#1</h1>
      <div class="announce">目次は右上の「≡」から！</div>
      <p>
        　※アドオン中級者向け<br>
        　アドオンの基礎が分かっている前提です。マニフェストの書き方とかは教えません。<br>
        　JavaScriptの知識も基礎ぐらいは要求するかもしれません......
      </p>
      <div id="sec01" class="headline" style="border-left: solid 10px #de8ae6;">はじめに</div>
      <p>
        　GameTestというのはそもそも、専用のストラクチャを用意してコマンドでテストを実行し、アドオンなどの動作を確認する目的で追加されたようそです。<br>
        　ところが、それらのストラクチャとコマンドがなくても動かせるということが分かったのが始まりです。
      </p>
      <div style="text-align: center; margin: 0.5em;"><img src="img/mcbe-addon-gt01-01.png"></div>
      <p>
        　いまとなっては当たり前みたいなところがありますが、割と情報がないものなのでこういう解説があると助かるんだろうなと思いました。
      </p>
      <details><summary>以前に一度書いたGameTestの記事からの引用「GameTestとは？」</summary>
        <p>
          　詳しくは忘れたけど、v1.17のベータぐらいで追加された超ニッチコンテンツです。今はある程度の要素が正式リリースバージョンで使えるはずです。<br>
          　もともとは、JavaScriptというホントのプログラミング(言語)を使ってプログラムを作り、専用のストラクチャセットを使ってワールド内でアドオンのコンテンツを検証するみたいなものです。<br>
          　アドオンの検証なんて普通にできるので正直いらないと思いますが、どこかの誰かさん(複数)があることに気づくわけです。
        </p>
        <p style="text-align: center;">
          <b>本当にGameTestのテストを実行をしないとJavaScriptは動かないのか？？</b>
        </p>
        <p>
          　なんということでしょう、テストを実行していなくともJavaScriptが読み込まれるではありませんか(そんなに驚くことでもないけど)。<br>
          　簡単な原理の説明とかは書くのをやめました。どうせ長文になるので。
        </p>
      </details>
      <div id="sec02" class="headline" style="border-left: solid 10px #de8ae6;">準備</div>
      <h3 id="sec01sec01">マニフェストに違いアリ！</h3>
      <p>　実は、JavaScriptを特別に使うので、普通のビヘイビア用からいくつか編集する必要があります。</p>
      <div class="pDat">Dat</div><div class="dir">manifest.json</div>
      <div class="demoCode">{
  <span class="hljs-attr">"format_version"</span>: <span class="hljs-number">2</span>,
  <span class="hljs-attr">"header"</span>: {
    <span class="hljs-attr">"description"</span>: "",
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"MyGameTestAddon"</span>,
    <span class="hljs-attr">"uuid"</span>: <span class="hljs-string">"5ef4c2d7-f5fa-40f3-8a14-cc97ea0fedb6"</span>,
    <span class="hljs-attr">"version"</span>: [ <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span> ],
    <span class="hljs-attr">"min_engine_version"</span>: [ <span class="hljs-number">1</span>, <span class="hljs-number">18</span>, <span class="hljs-number">20</span> ]
  },
  <span class="hljs-attr">"modules"</span>: [
    {
      <span class="hljs-attr">"description"</span>: "",
      <span class="hljs-attr">"type"</span>: "<span style="background: #83ffd9;">javascript</span>",
      <span class="hljs-attr">"uuid"</span>: <span class="hljs-string">"1c12f92a-d060-40b4-9c53-ad27793134ad"</span>,
      <span class="hljs-attr">"version"</span>: [ <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span> ],
      <span class="hljs-attr">"entry"</span>: "<span style="background: #83ffd9;">scripts/Main.js</span>"
    }
  ],
  <div class="demoMark_r"><span class="hljs-attr">"dependencies"</span>: [
  {
    <span class="hljs-attr">"uuid"</span>: <span class="hljs-string">"6f4b6893-1bb6-42fd-b458-7fa3d0c89616"</span>,
    <span class="hljs-attr">"version"</span>: [ <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span> ]
  },
  {
    <span class="hljs-attr">"uuid"</span>: <span class="hljs-string">"b26a4d4c-afdf-4690-88f8-931846312678"</span>,
    <span class="hljs-attr">"version"</span>: [ <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span> ]
  },
  {
    <span class="hljs-attr">"uuid"</span>: <span class="hljs-string">"2bd50a27-ab5f-4f40-a596-3641627c635e"</span>,
    <span class="hljs-attr">"version"</span>: [ <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span> ]
  }
]</div>
}</div>
      <p>
        ① modulesのtypeをjavascriptにする<br>
        ② modulesのentryを追加して、動かすスクリプトのファイルパスを指定する(オススメはscripts/〇〇.js)。<br>
        ③ dependenciesに三つの依存関係を追加。UUIDは変えちゃダメです！<br><br>
        　GameTestだけのパックならこれでいいんですが、同時にアイテムなどを追加したいという場合はmoduleを追加する必要があります。
      </p>
      <div class="demoCode"><span class="hljs-attr">"modules"</span>: [
  {
    <span class="hljs-attr">"description"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"javascript"</span>,
    <span class="hljs-attr">"uuid"</span>: <span class="hljs-string">"1c12f92a-d060-40b4-9c53-ad27793134ad"</span>,
    <span class="hljs-attr">"version"</span>: [ <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span> ],
    <span class="hljs-attr">"entry"</span>: <span class="hljs-string">"scripts/Main.js"</span>
  },
  { <span class="hljs-comment">// 要するにいつもの</span>
    <span class="hljs-attr">"description"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"type"</span>: "<span style="background: #83ffd9;">data</span>",
    <span class="hljs-attr">"uuid"</span>: <span class="hljs-string">"2d25ea17-1b1c-4c2c-b768-86c1640e6d6d"</span>,
    <span class="hljs-attr">"version"</span>: [ <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span> ]
  }
],</div>
      <h3 id="sec01sec02">スクリプトの場所</h3>
      <p>
        　先ほどちらっと言いましたが「scripts/〇〇.js」がオススメです。ビヘイビアパックに入れてください。
      </p>
      <div style="text-align: center;">
        <div style="text-align: left;" class="gray_box">
          ビヘイビア<br>
          　 ┣ manifest.json<br>
          　 ┣ pack_icon.png<br>
          　 ┗ <b>scripts</b><br>
          　 　 ┗<b>〇〇.js</b>
        </div>
      </div>
      <div id="sec03" class="headline" style="border-left: solid 10px #de8ae6;">スクリプトを書く</div>
      <p>　まず初めはやっぱり「ワールドに入ったらHello, world!」ですね。</p>
      <div class="pDat">Dat</div><div class="dir">scripts/Main.js</div>
      <pre><code class="js">import { world } from "mojang-minecraft";

let time = 0;

world.events.tick.subscribe(eventData => {

  if(time &lt; 200) {
    time = time + 1;
  }

  if(time == 120) {
    world.getDimension("overworld").runCommand("say Hello, world!");
  }

});</code></pre>
      <p>
        　これは、ワールドが生成されてから120tick(6秒)後に/sayコマンドを実行します。シンプルですね。<br>
        　ちなみに、時間差をつけないと、まだロード画面が終わってないのに実行されてしまいます。
      </p>
      <h3 id="sec02sec01">ざっくりコード解説</h3>
      <h4>import文</h4>
      <p>　worldというクラスをmojang-minecraftから"輸入"してます。こうしていろんなものをインポートすることで、ゲーム内のものを読み取ることができます。</p>
      <pre><code class="js">import { world } from "mojang-minecraft";</code></pre>
      <h4>変数宣言</h4>
      <p>　時間を数えるための変数を初期値0で作ります。</p>
      <pre><code class="js">let time = 0;</code></pre>
      <h4>イベント</h4>
      <p>　worldクラスからイベントを読み取ります。この中に書かれた処理は<b>毎tick実行</b>されます。</p>
      <pre><code class="js">world.events.tick.subscribe(eventData => {

  // 処理

});</code></pre>
      <p>　この形はこれで一つのカタマリだと認識するのがいいと思います。</p>
      <h4>時間のカウントアップ</h4>
      <p>　timeが200未満のとき、timeにtime+1を代入します。</p>
      <pre><code class="js">if(time < 200) {
  time = time + 1;
}</code></pre>
      <h4>コマンドの実行</h4>
      <p>
        　timeが120になったらコマンドを実行します。<br>
        　worldからgetDimensionメソッドを使ってディメンションを取得して、取得したディメンションのrunCommandメソッドでコマンドを実行します。
      </p>
      <pre><code class="js">if(time == 120) {
  world.getDimension("overworld").runCommand("say Hello, world!");
}</code></pre>
      <hr>
      <p>
        　慣れていればこの全体のコードはこんな感じで少し短くできます↓
      </p>
      <pre><code class="js">import { world } from "mojang-minecraft";

let time = 0;

world.events.tick.subscribe(eventData => {

  tick += (tick > 200)? 0 : 1;
  if(tick == 120) world.getDimension("overworld").runCommand("say Hello, world!");

});</code></pre>
      <div id="sec04" class="headline" style="border-left: solid 10px #de8ae6;">完成</div>
      <p>
        　これでもう完成です。ワールドに入ってすぐチャットに「Hello, world!」と表示されれば成功です。<br>
        　設定で「ゲームテスト フレームワーク」をオンにし忘れないでください。
      </p>
      <div style="height: 200px; display: flex; justify-content: flex-end; align-items: center;">
        <a href="mcbe_addon_gt02.html">GameTest解説#2</a>　→
      </div>
    </div>
    <div id="sidebar">
      <iframe src="side_bar.html"></iframe>
    </div>
  </div>
  <div align="right" style="margin: 8px;"><span style="font-size: 70%;">constructed by: Rinca Hayamine</span></div>
  <header>
    <div class="always-show">
      <a href="masec_note_home.html"><img id="logo" src="img/masec_note_black.png"></a>
      <div class="menu-button no-select"><label for="check"><div style="display: table-cell; vertical-align: middle;">≡</div></label></div>
    </div>
    <input type="checkbox" name="check" id="check" style="display: none;">
    <div id="move-box">
      <div class="menu-close no-select"><label for="check">×</label></div>
      <div class="content">
        <div style="display: flex;">
          <div style="display: inline-block; width: 50%;"><h2>もくじ</h2></div>
          <div style="display: inline-block; width: 50%; text-align: right; transform: translate(0em, 3em);"><a href="#top">ページのトップへ</a></div>
        </div>
        <hr style="background-color: #64ec86; border: 1px solid #64ec86;">
        <h4><a href="#sec01">はじめに</a></h4>
        <hr style="background-color: #64ec86; border: 1px solid #64ec86;">
        <h4><a href="#sec02">準備</a></h4>
        <p>
          ・<a href="#sec02sec01">マニフェストに違いアリ！</a><br>
          ・<a href="#sec02sec02">スクリプトの場所</a>
        </p>
        <hr style="background-color: #64ec86; border: 1px solid #64ec86;">
        <h4><a href="#sec03">スクリプトを書く</a></h4>
        <p>
          ・<a href="#sec03sec01">ざっくりコード解説</a>
        </p>
        <hr style="background-color: #64ec86; border: 1px solid #64ec86;">
        <h4><a href="#sec04">完成</a></h4>
      </div>
    </div>
  </header>
  <script src="responsive.js"></script>
</body>
</html>
