<!DOCTYPE html>
<html lang="ja">
<head>
  <meta property="og:site_name" content="Masec's Note" />
  <meta property="og:title" content="ルートテーブルの作り方" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://rinca-h.github.io/masec_note/masec%20note/img/masec_note_thumb.png" />
  <meta property="og:description" content="ルートテーブルについて解説します" />
  <meta property="og:locale" content="ja_JP" />
  <meta name="twitter:card" content="summary" />
  <title>ルートテーブルの作り方 - Masec's Note</title>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/atelier-estuary-light.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <!-- <pre><code class="json">//コード</code></pre> -->
  <link rel="stylesheet" type="text/css" href="basic.css">
  <link rel="stylesheet" type="text/css" href="masec_note.css">
  <link rel="stylesheet" type="text/css" href="masec_note_mokuzi.css">
  <!--<style type="text/css"></style>-->
</head>
<body>
  <div style="padding: 0.5em;"><img id="logo" src="img/masec_note_black.png"></div>
  <div style="margin: 8px;"><span class="desc">uploaded:2021/11/27</span></div>
  <div id="whole">
    <div id="main">
      <div class="caution">
        <img src="img/caution.png" class="ignore"> 内容の変更が予定されている記事です！
      </div>
      <h1 id="top">アドオン作成 - ルートテーブルの作り方</h1>
      <div class="announce">目次は右上の「≡」から！</div>
      <p>
        　いろんなところで活躍するルートテーブルですが、JSONが見づらいのでなかなか思い通りにいかないかもしれません。<br>
        　今回はルートテーブルのJSONを見極めるコツを中心に作り方を解説していこうと思います。
      </p>
      <div id="sec01" class="headline" style="border-left: solid 10px #FF6169;">ルートテーブルとは</div>
      <p>
        モブを倒したり、ブロックを壊したりしたときに、<b>どんなアイテムを落とすか決める</b>ものです。<br>
        　派生して、チェストの中身や釣りのアイテム、敵モブの装備などにも流用されます。
      </p>
      <div id="sec02" class="headline" style="border-left: solid 10px #FF6169;">ファイルの場所</div>
      <p>
        　基本的にルートテーブルを指定するときはファイルパスで指定するので<b><span class="datM">ビヘイビアパック</span></b>内のどこでもいいんだと思いますが、
        　オススメはこのloot_tablesフォルダです。
      </p>
      <div style="text-align: center;">
        <div style="text-align: left;" class="gray_box">
          ━ ┳ manifest.json<br>
          　 ┣ <b>loot_tables</b><br>
          　 ┗ pack_icon.png
        </div>
      </div>
      <p>
        　自分で場所を指定できるので、<u>指定する場所に注意して</u>この中にさらにフォルダを作って分けることができます。<br>
        　オススメのフォルダ構成はこんな感じです。もちろん作るのは必要な分だけでいいです。
      </p>
      <div style="text-align: center;">
        <div style="text-align: left;" class="gray_box">
          ━ ┳ manifest.json<br>
          　 ┣ pack_icon.png<br>
          　 ┗ loot_tables<br>
          　 　 ┣ <b>blocks</b><br>
          　 　 ┣ <b>chests</b><br>
          　 　 ┣ <b>entities</b><br>
          　 　 ┣ <b>equipment</b><br>
          　 　 ┗ <b>gameplay</b>
        </div>
      </div>
      <div id="sec03" class="headline" style="border-left: solid 10px #FF6169;">ルートテーブルのJSON(基礎)</div>
      <p>　まず、一番シンプルな「<b>リンゴを必ず一つ落とす</b>」というルートテーブルです。</p>
      <div class="pDat">Dat</div><div class="dir">../blocks/my_item.json</div>
      <pre><code class="json">{
  "pools": [
    {
      "rolls": 1,
      "entries": [
        {
          "type": "item",
          "name": "minecraft:apple",
          "weight": 1
        }
      ]
    }
  ]
}</code></pre>
      <p>　もうこの時点でカッコが多くて見づらいんですよね。</p>
      <hr>
      <h3 id="sec03sec01">主な構成</h3>
      <div class="demoCode">{
  "pools": [
    <div class="demoMark_r">{
  "rolls": 1,
  "entries": [
    <div class="demoMark_b">{
  "type": "item",
  "name": "minecraft:apple",
  "weight": 1
}</div>
  ]
}</div>
  ]
}</div>
      <p>　このように枠で囲うと一気に分かりやすくなると思います。<u>それぞれの枠をどのように増やすか</u>でいろいろ変わってきます。</p>
      <hr>
      <h3 id="sec03sec02">選択肢を増やす</h3>
      <div class="demoCode">{
  "pools": [
    <div class="demoMark_r">{
  "rolls": 1,
  "entries": [
    <div class="demoMark_b">{
  "type": "item",
  "name": "minecraft:apple",
  "weight": 1
},</div>
    <div class="demoMark_b">{
  "type": "item",
  "name": "minecraft:apple_golden",
  "weight": 1
}</div>
  ]
}</div>
  ]
}</div>
      <p>
        　このように青い枠の部分を増やすと「<b>選択肢</b>」が増えます。<br>
        　この例では「<b>リンゴか金リンゴどちらか一つを必ず落とす</b>」というルートテーブルになります。確率はどちらも50%です。
      </p>
      <hr>
      <h3 id="sec03sec03">確率を変える</h3>
      <div class="demoCode">{
  "pools": [
    <div class="demoMark_r">{
  "rolls": 1,
  "entries": [
    <div class="demoMark_b">{
  "type": "item",
  "name": "minecraft:apple",
  "weight": <span style="background: #83ffd9;">9</span>
},</div>
    <div class="demoMark_b">{
  "type": "item",
  "name": "minecraft:apple_golden",
  "weight": 1
}</div>
  ]
}</div>
  ]
}</div>
      <p>
        　この<b>「weight」値を変えると確率が変わります</b>。これで<b>リンゴが90%、金リンゴが10%</b>になりました。<br>
        　<b>くじ引きの箱に「リンゴ」と書かれた紙が何枚、「金リンゴ」と書かれた紙が何枚入っているか</b>みたいなイメージですね。<br><br>
        　パーセントの計算は「<b>(確率を求めたいアイテムのweight)÷(赤い枠の中に登場するweightをぜんぶ足した値)×100</b>」です。4と1ならば80%と20%、3と2ならば60%と40%になります。<br><br>
        　確率のイメージがどうしてもわからないという場合は、赤い枠の中に登場するweightをぜんぶ足して最初から100になるようにしてもいいかもしれません。(9：1を90：10にしても比は変わりませんよね)
      </p>
      <hr>
      <h3 id="sec03sec04">ハズレをつくる</h3>
      <div class="demoCode">{
  "pools": [
    <div class="demoMark_r">{
  "rolls": 1,
  "entries": [
    <div class="demoMark_b">{
  "type": "<span style="background: #83ffd9;">empty</span>",
  "weight": 10
},</div>
    <div class="demoMark_b">{
  "type": "item",
  "name": "minecraft:apple",
  "weight": 9
},</div>
    <div class="demoMark_b">{
  "type": "item",
  "name": "minecraft:apple_golden",
  "weight": 1
}</div>
  ]
}</div>
  ]
}</div>
      <p>　このように<b>タイプ「empty」を入れてハズレを追加します</b>。ちなみにweightが上から10：9：1なので、確率は50%、45%、5%ということです。</p>
      <hr>
      <h3 id="sec03sec05">抽選対象を増やす</h3>
      <p>　今度はこのように、赤い枠を増やしたらどうなるでしょうか？</p>
      <div class="demoCode">{
  "pools": [
    <div class="demoMark_r">{
  "rolls": 1,
  "entries": [
    <div class="demoMark_b">{
  "type": "item",
  "name": "minecraft:apple",
  "weight": 1
}</div>
  ]
},</div>
    <div class="demoMark_r">{
  "rolls": 1,
  "entries": [
    <div class="demoMark_b">{
  "type": "item",
  "name": "minecraft:iron_ingot",
  "weight": 1
}</div>
  ]
}</div>
  ]
}</div>
      <p>
        　この場合は「<b>リンゴと鉄インゴットを必ず落とす</b>」というルートテーブルになります。<br>
        　こんがらがってきたでしょうか？　次のように青枠部分を増やすと分かると思います。
      </p>
      <div class="demoCode">{
  "pools": [
    <div class="demoMark_r">{
  "rolls": 1,
  "entries": [
    <div class="demoMark_b">{
  "type": "item",
  "name": "minecraft:apple",
  "weight": 9
}</div>
    <div class="demoMark_b">{
  "type": "item",
  "name": "minecraft:apple_golden",
  "weight": 1
}</div>
  ]
},</div>
    <div class="demoMark_r">{
  "rolls": 1,
  "entries": [
    <div class="demoMark_b">{
  "type": "item",
  "name": "minecraft:iron_ingot",
  "weight": 1
}</div>
  ]
}</div>
  ]
}</div>
      <p>
        　この場合「<b>90%の確率でリンゴ、10%の確率で金リンゴをどちらか1つ落とし、さらに鉄を100%で落とす</b>」というものになります。<br>
        　<b>くじ引きの箱が二つあり、一つ目の箱には「リンゴ」と書かれた紙が9枚と「金リンゴ」と書かれた紙が1枚、
        二つ目の箱には「鉄インゴット」と書かれた紙が1枚だけ入っている</b>という感じです。
      </p>
      <img src="img/msec-addon7-01.png">
      <p>
        　しかし、今までのままだとアイテムは一つしか落としません。<br>
        　個数なども含め、特殊な落としかたをどうやって指定するか見ていきましょう。
      </p>
      <div id="sec04" class="headline" style="border-left: solid 10px #FF6169;">ファンクション</div><br>
      <div class="demoCode">{
  "pools": [
    <div class="demoMark_r">{
  "rolls": 1,
  "entries": [
    <div class="demoMark_b">{
  "type": "item",
  "name": "minecraft:apple",
  "weight": 1,
  <div class="demoMark_g">"functions": [
  {
    // ファンクションの中身
  }
]</div>
}</div>
  ]
}</div>
  ]
}</div>
      <p>
        　ここにファンクションというものを追加して特殊な方法でドロップするようにします。
      </p>
      <hr>
      <h3 id="sec04sec01">個数を指定</h3>
      <div class="demoCode">{
  "pools": [
    <div class="demoMark_r">{
  "rolls": 1,
  "entries": [
    <div class="demoMark_b">{
  "type": "item",
  "name": "minecraft:apple",
  "weight": 1,
  <div class="demoMark_g">"functions": [
  {
    "function": "set_count",
    "count": { "min": 0, "max": 2 }
  }
]</div>
}</div>
  ]
}</div>
  ]
}</div>
      <p>
        　例えばこのようにすると「<b>リンゴが必ず0~2個ドロップする</b>」ようになります。
      </p>
      <div id="sec05" class="headline" style="border-left: solid 10px #FF6169;">スキーマ的なやつ</div>
      <p>
        　ファンクションをすべて解説するわけにはいかないので、ここにおそらく全てのファンクションを載せました。<br>
        　JSON全体をコピーするよりはファンクションなど一部をコピーすることをお勧めします。<br>
        　順番はファンクション名のアルファベット順になっていると思います。
      </p>
      <div class="demoCode">{
  "pools": [
    {
      <div class="demoMark_r">"conditions": [
  {
    "condition": "killed_by_player"
  },
  {
    "condition": "random_chance_with_looting",
    "chance": 0.025,
    "looting_multiplier": 0.01
  },
  {
    "condition": "random_difficulty_chance",
    "default_chance": 0.5,
    "peaceful": 0,
    "hard": 0.6
  }
],</div>
      "rolls": 1,
      "entries": [
        <div class="demoMark_b">{
  "type": "empty",
  "weight": 1
},</div>
        <div class="demoMark_b">{
  "type": "loot_table",
  "name": "loot_tables/gameplay/fishing/fish",
  "quarity": 1,
  "weight": 1
},</div>
        <div class="demoMark_b">{
  "type": "item",
  "name": "ItemID",
  "weight": 1,
  "functions": [
    <div class="demoMark_g">{
  "function": "enchant_book_for_trading",
  "base_cost": 2,
  "base_random_cost": 5,
  "per_level_random_cost": 10,
  "per_level_cost": 3
},</div>
    <div class="demoMark_g">{ // ランダムにエンチャントします
  "function": "enchant_randomly",
  "treasure": true
},</div>
    <div class="demoMark_g">{ // ランダムにエンチャントします(equipment用)
  "function": "enchant_random_gear",
  "chance": 0.25
},</div>
    <div class="demoMark_g">{ // レベルを指定してランダムにエンチャント
  "function": "enchant_with_levels",
  "treasure": true,
  "levels": { "min": 15, "max": 20 }
},</div>
    <div class="demoMark_g">{ // 探検家の地図
  "function": "exploration_map",
  "destination": "buriedtreasure" // "buriedtreasure", "monument", "mansion"
},</div>
    <div class="demoMark_g">{ // 燃え死んだときにかまどレシピに基づいてアイテムを焼くか
  "function": "furnace_smelt",
  "conditions": [
    {
      "condition": "entity_properties",
      "entity": "this",
      "properties": { "on_fire": true }
    }
  ]
},</div>
    <div class="demoMark_g">{ // ドロップ増加エンチャントで追加される個数
  "function": "looting_enchant",
  "count": { "min": 0, "max": 1 }
},</div>
    <div class="demoMark_g">{ // ランダムなデータ値
  "function": "random_aux_value",
  "values": { "min": 0, "max": 15 }
},</div>
    <div class="demoMark_g">{ // ブロックステートをランダムにします
  "function": "random_block_state",
  "block_state": "flower_type",
  "values": { "min": 0, "max": 10 } 
},</div>
    <div class="demoMark_g">{ // ランダムに染色
  "function": "random_dye"
},</div>
    <div class="demoMark_g">{ // スポーンエッグの中身
  "function": "set_actor_id",
  "id": "ID"
},</div>
    <div class="demoMark_g">{ // 旗の模様
  "function": "set_banner_details",
  "type": 1
},</div>
    <div class="demoMark_g">{ // ドロップする個数
  "function": "set_count",
  "count": { "min": 0, "max": 2 }
},</div>
    <div class="demoMark_g">{ // 耐久を減らす(0.0~1.0の割合)
  "function": "set_damage",
  "damage": { "min": 0.0, "max": 0.9 }
},</div>
    <div class="demoMark_g">{ // データ値を指定
  "function": "set_data",
  "data": 0
},</div>
    <div class="demoMark_g">{
  "function": "minecraft:set_data_from_color_index"
},</div>
    <div class="demoMark_g">{ // 説明文を追加
  "function": "set_lore",
  "lore": [ "Lore1", "Lore2", "..." ]
},</div>
    <div class="demoMark_g">{ // 名前を指定
  "function": "set_name",
  "name": "Name"
},</div>
    <div class="demoMark_g">{ // 指定したエンチャント
  "function": "specific_enchants",
  "enchants": [
    {
      "id": "soul_speed",
      "level": [ 1, 3 ]
    }
  ]
}</div>
    // ...
  ]
}</div>
      ]
    }
  ]
}</div>
      <p>

      </p>
    </div>
    <div id="sidebar">
      <iframe src="side_bar.html"></iframe>
    </div>
  </div>
  <div align="right" style="margin: 8px;"><span style="font-size: 70%;">constructed by: Rinca Hayamine</span></div>
  <header>
    <div class="always-show">
      <a href="masec_note_home.html"><img id="logo" src="img/masec_note_black.png"></a>
      <div class="menu-button no-select"><label for="check"><div style="display: table-cell; vertical-align: middle;">≡</div></label></div>
    </div>
    <input type="checkbox" name="check" id="check" style="display: none;">
    <div id="move-box">
      <div class="menu-close no-select"><label for="check">×</label></div>
      <div class="content">
        <div style="display: flex;">
          <div style="display: inline-block; width: 50%;"><h2>もくじ</h2></div>
          <div style="display: inline-block; width: 50%; text-align: right; transform: translate(0em, 3em);"><a href="#top">ページのトップへ</a></div>
        </div>
        <hr style="background-color: #64ec86; border: 1px solid #64ec86;">
        <h4><a href="#sec01">ルートテーブルとは</a></h4>
        <hr style="background-color: #64ec86; border: 1px solid #64ec86;">
        <h4><a href="#sec02">ファイルの場所</a></h4>
        <hr style="background-color: #64ec86; border: 1px solid #64ec86;">
        <h4><a href="#sec03">ルートテーブルのJSON(基礎)</a></h4>
        <p>
          ・<a href="#sec03sec01">主な構成</a><br>
          ・<a href="#sec03sec02">選択肢を増やす</a><br>
          ・<a href="#sec03sec03">確率を変える</a><br>
          ・<a href="#sec03sec04">ハズレをつくる</a><br>
          ・<a href="#sec03sec05">抽選対象を増やす</a>
        </p>
        <hr style="background-color: #64ec86; border: 1px solid #64ec86;">
        <h4><a href="#sec04">ファンクション</a></h4>
        <p>
          ・<a href="#sec04sec01">個数を指定</a>
        </p>
        <hr style="background-color: #64ec86; border: 1px solid #64ec86;">
        <h4><a href="#sec05">スキーマ的なやつ</a></h4>
      </div>
    </div>
  </header>
  <script src="responsive.js"></script>
</body>
</html>
